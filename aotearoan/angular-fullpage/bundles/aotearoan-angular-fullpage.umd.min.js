!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/router"),require("@nicky-lenaers/ngx-scroll-to"),require("rxjs/operators"),require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("@aotearoan/angular-fullpage",["exports","@angular/common","@angular/router","@nicky-lenaers/ngx-scroll-to","rxjs/operators","@angular/core","rxjs"],e):e((t.aotearoan=t.aotearoan||{},t.aotearoan["angular-fullpage"]={}),t.ng.common,t.ng.router,t.ngxScrollTo,t.rxjs.operators,t.ng.core,t.rxjs)}(this,function(t,e,n,i,r,l,o){"use strict";var s=function(){function t(){}return t.prototype.getNativeWindow=function(){return window},t.decorators=[{type:l.Injectable,args:[{providedIn:"root"}]}],t}(),c=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{providers:[s]}]}],t}(),a=function(){function t(){var n=this;this.listeners={},this.eventsSubject=new o.Subject,this.subscription=this.eventsSubject.subscribe(function(e){Object.keys(n.listeners).forEach(function(t){return n.listeners[t].scroll(e)})})}return t.prototype.ngOnDestroy=function(){this.eventsSubject.complete(),this.subscription.unsubscribe(),this.subscription.destroy(),this.listeners={}},t.prototype.addListener=function(t,e){this.listeners[t]=e},t.prototype.removeListener=function(t){this.listeners[t]&&delete this.listeners[t]},t.prototype.scroll=function(t){this.eventsSubject.next(t)},t.decorators=[{type:l.Injectable}],t.ctorParameters=function(){return[]},t}(),u=function(){function o(t,e,n,o,i,r,s){var c=this;this.scrollToService=t,this.route=e,this.router=n,this.document=o,this.windowRef=i,this.scrollEventService=r,this.platformLocation=s,this.scrollSensitivity=1250,this.sectionChange=new l.EventEmitter,this.window=i.getNativeWindow(),s.onPopState(function(){c.window.location.reload()})}return o.prototype.ngOnInit=function(){var n=this;this.scrollEventService.addListener(o.eventListenerKey,this),this.window.onwheel=function(){return!n.scrolling},setTimeout(function(){var e=n.route.snapshot.fragment,t=Math.max(n.sections.findIndex(function(t){return t.url===e}),0);n.switchSections(t),n.scroll(t)},200)},o.prototype.ngOnDestroy=function(){this.scrollEventService.removeListener(o.eventListenerKey)},o.prototype.scroll=function(t){this.lockScrolling||t===this.sectionIndex||this.sectionScrolling||(this.scrolling=!0,this.switchSections(t),this.invokeScroll())},o.prototype.switchSections=function(t){this.previousSectionIndex=this.sectionIndex,this.sectionIndex=t,this.activeSection&&this.activeSection.classList.remove(o.activeClass);var e=this.sections[this.sectionIndex];this.activeSection=this.document.getElementById(e.url),this.activeSection&&this.activeSection.classList.add(o.activeClass),this.sections.forEach(function(t){return t.active=t.url===e.url}),this.sectionChange.emit(e.url)},o.prototype.invokeScroll=function(){var t=this,e=this.sections[this.sectionIndex],n={target:e.url};this.router.navigate([this.window.location.pathname],{fragment:e.url}),this.scrollToService.scrollTo(n).pipe(r.finalize(function(){setTimeout(function(){t.scrolling=!1},o.scrollingCompleteSensitivity)})).subscribe()},o.prototype.scrollUp=function(t){var e=this.calcSectionPosition();this.lockScrolling?e.atSectionTop?t.preventDefault():this.activateSectionScrolling():this.canScroll(t)&&this.canScrollUp(t,e)?0<this.sectionIndex?this.scroll(this.sectionIndex-1):"wheel"!==t.type&&t.preventDefault():this.activateSectionScrolling()},o.prototype.scrollDown=function(t){var e=this.calcSectionPosition();this.lockScrolling?e.atSectionBottom?t.preventDefault():this.activateSectionScrolling():this.canScroll(t)&&this.canScrollDown(t,e)?this.sectionIndex<this.sections.length-1?this.scroll(this.sectionIndex+1):"wheel"!==t.type&&t.preventDefault():this.activateSectionScrolling()},o.prototype.activateSectionScrolling=function(){var t=this;this.sectionScrolling=!0,this.sectionScrollingTimeout&&clearTimeout(this.sectionScrollingTimeout),this.sectionScrollingTimeout=setTimeout(function(){t.sectionScrolling=!1,t.sectionScrollingTimeout&&clearTimeout(t.sectionScrollingTimeout)},this.scrollSensitivity)},o.prototype.canScroll=function(t){return"keydown"!==t.type||this.checkFocus()},o.prototype.checkFocus=function(){return!o.ignoreWhenFocused.includes(this.document.activeElement.localName)},o.prototype.canScrollUp=function(t,e){return"wheel"!==t.type||e.atSectionTop},o.prototype.canScrollDown=function(t,e){return"wheel"!==t.type||e.atSectionBottom},o.prototype.calcSectionPosition=function(){return{atSectionTop:!!this.activeSection&&0===this.activeSection.scrollTop,atSectionBottom:!!this.activeSection&&this.activeSection.offsetHeight+this.activeSection.scrollTop>=this.activeSection.scrollHeight}},o.prototype.fullpageWindowScroll=function(t){this.scrolling?t.preventDefault():0<t.deltaY?this.scrollDown(t):this.scrollUp(t)},o.prototype.fullpageArrowUpEvent=function(t){this.scrollUp(t)},o.prototype.fullpageArrowDownEvent=function(t){this.scrollDown(t)},o.prototype.fullpageResizeEvent=function(){var t={target:this.sections[this.sectionIndex].url};this.scrollToService.scrollTo(t)},o.ignoreWhenFocused=["textarea","input"],o.eventListenerKey="fullpage",o.activeClass="fullpage-active",o.scrollingCompleteSensitivity=750,o.decorators=[{type:l.Component,args:[{selector:"ao-fullpage",styles:["\n    ::ng-deep .fullpage {\n      display: flex;\n      flex-direction: column;\n      margin: 0;\n    }\n\n    ::ng-deep .fullpage .fullpage-section {\n      width: 100vw;\n      height: 100vh;\n      overflow-y: scroll;\n      overflow-x: hidden;\n    }\n\n    ::ng-deep .fullpage .fullpage-section-fit-content {\n      width: 100vw;\n    }\n\n    ::ng-deep body {\n      padding: 0;\n      margin: 0;\n    }\n\n    ::ng-deep html,\n    ::ng-deep body,\n    ::ng-deep .fullpage-section {\n      -ms-overflow-style: -ms-autohiding-scrollbar;\n    }\n\n    ::ng-deep html::-webkit-scrollbar,\n    ::ng-deep body::-webkit-scrollbar,\n    ::ng-deep .fullpage-section::-webkit-scrollbar {\n      width: 0;\n    }\n  "],template:'\n    <div class="fullpage" *ngIf="sections" [class.scrolling]="scrolling">\n      <ng-content></ng-content>\n    </div>\n  '}]}],o.ctorParameters=function(){return[{type:i.ScrollToService},{type:n.ActivatedRoute},{type:n.Router},{type:undefined,decorators:[{type:l.Inject,args:[e.DOCUMENT]}]},{type:s},{type:a},{type:e.PlatformLocation}]},o.propDecorators={sections:[{type:l.Input}],lockScrolling:[{type:l.Input}],scrollSensitivity:[{type:l.Input}],sectionChange:[{type:l.Output}],fullpageWindowScroll:[{type:l.HostListener,args:["window:wheel",["$event"]]}],fullpageArrowUpEvent:[{type:l.HostListener,args:["window:keydown.PageUp",["$event"]]},{type:l.HostListener,args:["window:keydown.ArrowUp",["$event"]]},{type:l.HostListener,args:["window:keydown.shift.space",["$event"]]}],fullpageArrowDownEvent:[{type:l.HostListener,args:["window:keydown.PageDown",["$event"]]},{type:l.HostListener,args:["window:keydown.ArrowDown",["$event"]]},{type:l.HostListener,args:["window:keydown.space",["$event"]]}],fullpageResizeEvent:[{type:l.HostListener,args:["window:resize"]}]},o}(),p=function(){function t(){}return t.decorators=[{type:l.NgModule,args:[{declarations:[u],exports:[u],imports:[e.CommonModule,i.ScrollToModule.forRoot(),c],providers:[a]}]}],t}(),h=function g(){};t.FullpageModule=p,t.WindowRefModule=c,t.FullpageComponent=u,t.SectionModel=h,t.ScrollEventService=a,t.WindowRefService=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=aotearoan-angular-fullpage.umd.min.js.map